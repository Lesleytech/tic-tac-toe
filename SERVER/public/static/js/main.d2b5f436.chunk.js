(this["webpackJsonptic-tac-toe"]=this["webpackJsonptic-tac-toe"]||[]).push([[0],{166:function(e,t,n){e.exports={board:"Board_board__3Lsgr"}},169:function(e,t,n){e.exports={header:"Header_header__1k8xJ"}},172:function(e,t,n){e.exports={container:"Container_container__mgx7B"}},173:function(e,t,n){e.exports={container:"HomeScreen_container__36rsz"}},176:function(e,t,n){e.exports=n(361)},181:function(e,t,n){},191:function(e,t){},193:function(e,t){},203:function(e,t){},205:function(e,t){},232:function(e,t){},233:function(e,t){},238:function(e,t){},240:function(e,t){},26:function(e,t,n){e.exports={container:"PlayScreen_container__3TXxw",play_container:"PlayScreen_play_container__1lRx6",playground:"PlayScreen_playground__2Vq_A",messaging:"PlayScreen_messaging__36UOm",form:"PlayScreen_form__3vPr8",playground_sm:"PlayScreen_playground_sm__-Zw-l"}},264:function(e,t){},34:function(e,t,n){e.exports={container:"ChooseOpponent_container__2AT7S",opponents_container:"ChooseOpponent_opponents_container__1jHq9",opponents:"ChooseOpponent_opponents__3qbCq",opponent:"ChooseOpponent_opponent__cLHCB",button:"ChooseOpponent_button__361tS"}},358:function(e,t){},361:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(165),c=n.n(o),l=(n(181),n(18)),s=n(6),i=n(1),u=Object(a.createContext)(),m=function(e){var t=e.children,n=Object(a.useState)(Array(9).fill(null)),o=Object(i.a)(n,2),c=o[0],l=o[1],s=Object(a.useState)(!1),m=Object(i.a)(s,2),f=m[0],d=m[1],p=Object(a.useState)(""),b=Object(i.a)(p,2),_=b[0],g=b[1],v=Object(a.useState)(!1),E=Object(i.a)(v,2),O=E[0],h=E[1],y=Object(a.useState)("X"),j=Object(i.a)(y,2),x=j[0],C=j[1];return r.a.createElement(u.Provider,{value:{squares:[c,l],isX:[f,d],winner:[_,g],multiplayer:[O,h],nextPlayer:[x,C]}},t)},f=Object(a.createContext)(),d=function(e){var t=e.children,n=Object(a.useState)(""),o=Object(i.a)(n,2),c=o[0],l=o[1],s=Object(a.useState)(""),u=Object(i.a)(s,2),m=u[0],d=u[1],p=Object(a.useState)(""),b=Object(i.a)(p,2),_=b[0],g=b[1];return r.a.createElement(f.Provider,{value:{user:[c,l],room:[m,d],player:[_,g]}},t)},p=n(166),b=n.n(p),_=n(19),g=n(55),v=n.n(g),E=Object(a.createContext)(),O=function(e){var t=e.children,n=Object(a.useState)(""),o=Object(i.a)(n,2),c=o[0],l=o[1];return r.a.createElement(E.Provider,{value:[c,l]},t)};function h(e){var t=e.value,n=e.id,o=Object(a.useContext)(u),c=o.squares,l=o.isX,s=o.multiplayer,m=Object(a.useContext)(f).player,d=Object(i.a)(c,2),p=d[0],b=d[1],g=Object(i.a)(l,2),O=g[0],h=g[1],y=Object(i.a)(m,1)[0],j=Object(i.a)(s,1)[0],x=Object(a.useContext)(E),C=Object(i.a)(x,1)[0];return r.a.createElement("div",{id:"square_".concat(n),className:v.a.square,onClick:j?function(){var e=Object(_.a)(p);!e[n]&&(O&&"X"===y||!O&&"O"===y)&&(e[n]=O?"X":"O",b(e),h(!O),C.emit("userPlayed",{squares:e,isX:!O}))}:function(){var e=Object(_.a)(p);e[n]||(e[n]=O?"X":"O",b(e),h(!O))},style:{cursor:!p[n]&&(O&&"X"===y||!O&&"O"===y)?"pointer":"not-allowed",pointerEvents:j?p[n]?"none":"auto":!p[n]&&O?"auto":"none"}},"O"===t?r.a.createElement("svg",{className:v.a.svg,width:"100",height:"100"},r.a.createElement("circle",{cx:"50",cy:"50",r:"40",stroke:"#f44",strokeWidth:"10",fill:"none"})):"X"===t?r.a.createElement("svg",{className:v.a.svg,width:"100",height:"100"},r.a.createElement("line",{x1:"10",y1:"10",x2:"90",y2:"90",stroke:"#f44",strokeWidth:"10"}),r.a.createElement("line",{x1:"90",y1:"10",x2:"10",y2:"90",stroke:"#f44",strokeWidth:"10"})):"")}function y(e){var t=e.squares;return r.a.createElement("div",{className:b.a.board},t.map((function(e,t){return r.a.createElement(h,{value:e,id:t,key:t})})))}var j=n(56),x=n.n(j),C=Object(a.createContext)(),w=function(e){var t=e.children,n=Object(a.useState)("ChooseMode"),o=Object(i.a)(n,2),c=o[0],l=o[1];return r.a.createElement(C.Provider,{value:[c,l]},t)};function N(){var e=Object(a.useContext)(C)[1],t=Object(a.useContext)(u).multiplayer[1];return r.a.createElement("div",{className:x.a.container},r.a.createElement("h2",null,"Choose Mode"),r.a.createElement("div",null,r.a.createElement(l.b,{to:"/play"},r.a.createElement("button",{className:x.a.button},r.a.createElement("i",{className:"fa fa-user","aria-hidden":"true"})," Single Player")),r.a.createElement("button",{className:x.a.button,onClick:function(){e("ChooseOpponent"),t(!0)}},r.a.createElement("i",{className:"fa fa-users","aria-hidden":"true"})," Multiplayer")))}var S=n(34),k=n.n(S);function q(){var e=Object(a.useContext)(C)[1],t=Object(a.useContext)(f),n=t.room,o=t.player,c=Object(a.useState)([]),l=Object(i.a)(c,2),s=l[0],u=l[1],m=n[1],d=o[1];Object(a.useEffect)((function(){var e=setInterval((function(){fetch("/api/users").then((function(e){return e.json()})).then((function(e){u(e)})).catch((function(t){console.log(t),clearInterval(e)}))}),1e3);return function(){clearInterval(e)}}),[]);return r.a.createElement("div",{className:k.a.container},r.a.createElement("h2",null,"Choose Opponent"),r.a.createElement("div",{className:k.a.opponents_container},r.a.createElement("button",{className:k.a.button,onClick:function(){return e("ChooseUsername")}},r.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})," New Opponent"),r.a.createElement("ul",{className:k.a.opponents},s.map((function(t,n){var a=t.username,o=t.room;return r.a.createElement("li",{key:n,className:k.a.opponent,onClick:function(){return function(t){m(t),d("O"),e("ChooseUsername")}(o)}},a)})))))}var X=n(168),B=n.n(X),P=n(57),M=n.n(P);function T(){var e=Object(a.useContext)(f),t=e.user,n=e.room,o=e.player,c=Object(a.useContext)(C)[1],l=Object(i.a)(t,2),u=l[0],m=l[1],d=Object(i.a)(o,2),p=d[0],b=d[1],_=Object(i.a)(n,2),g=_[0],v=_[1],E=Object(a.useState)(""),O=Object(i.a)(E,2),h=O[0],y=O[1],j=Object(a.useState)(!1),x=Object(i.a)(j,2),w=x[0],N=x[1];return w?(c("ChooseMode"),r.a.createElement(s.a,{to:"/play"})):r.a.createElement("div",{className:M.a.container},r.a.createElement("h2",null,"Choose Username"),r.a.createElement("p",null,"Enter a username to use in the game"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),u?u.length<3?y("Username is too short"):u.length>10?y("Username is too long"):/\W/.test(u)?y("Username contains invalid characters"):(g||p||(v("".concat(u).concat(B.a.generate(5))),b("X")),N(!0)):y("Username is required")}},r.a.createElement("div",{className:M.a.form_group},r.a.createElement("input",{type:"text",value:u,onChange:function(e){m(e.target.value),y("")},placeholder:"Username",style:{border:h?"2px solid #f44":"none"}}),r.a.createElement("small",null,h)),r.a.createElement("button",{className:M.a.button,type:"submit"},r.a.createElement("i",{className:"fa fa-check-circle-o","aria-hidden":"true"})," Done")))}var U=n(169),A=n.n(U);function W(){return r.a.createElement("header",{className:A.a.header},r.a.createElement("strong",null,"Tic-",r.a.createElement("span",null,"Tac"),"-Toe"))}var I=n(170),G=n.n(I),H=Object(a.createContext)(),R=function(e){var t=e.children,n=Object(a.useState)([]),o=Object(i.a)(n,2),c=o[0],l=o[1];return r.a.createElement(H.Provider,{value:[c,l]},t)},Y=n(88),L=n.n(Y),D=n(171),J=n.n(D),Q=n(44),Z=n.n(Q);function z(e){var t=e.text,n=e.sender,a=e.self;return r.a.createElement("div",{className:a?Z.a.message_container_sender:Z.a.message_container_receiver},r.a.createElement("div",{className:Z.a.message},r.a.createElement("small",null,a?"":n),r.a.createElement("p",{style:{marginRight:"25px"}},t),r.a.createElement("small",{className:Z.a.time},J()().format("LT"))))}function F(e){var t=e.typing,n=e.player,o=Object(a.useContext)(H),c=Object(i.a)(o,2),l=c[0],s=c[1],u=Object(a.useContext)(E),m=Object(i.a)(u,1)[0];return Object(a.useEffect)((function(){m&&(m.on("newMessage",(function(e){s([].concat(Object(_.a)(l),[e]))})),m.on("playAgain",(function(e){s([].concat(Object(_.a)(l),[{text:"New round",sender:"#GameBot"},{text:e===n?"You start":"Player ".concat(e," starts"),sender:"#GameBot"}]))})),m.on("newChallenger",(function(){s([].concat(Object(_.a)(l),[{text:"A new challenger joined!",sender:"#GameBot"},{text:"Challenger starts",sender:"#GameBot"}]))})))}),[l]),r.a.createElement(G.a,{className:L.a.messages},l.map((function(e,t){return r.a.createElement(z,{text:e.text,sender:e.sender,time:e.time,self:e.self,key:t})})),r.a.createElement("p",{className:L.a.typing},t&&"typing..."))}var V=n(172),$=n.n(V);function K(e){var t=e.children;return r.a.createElement("div",{className:$.a.container},r.a.createElement(W,null),t)}var ee=n(58),te=n.n(ee);function ne(e){var t=e.winner,n=e.setWinner,o=e.player,c=e.room,u=e.nextPlayer,m=e.multiplayer,f=e.setSquares,d=e.setIsX,p=Object(a.useContext)(E),b=Object(i.a)(p,1)[0],_=Object(a.useState)(!1),g=Object(i.a)(_,2),v=g[0],O=g[1];return v?r.a.createElement(s.a,{to:"/"}):r.a.createElement("div",{className:te.a.container},r.a.createElement("h2",null,o===t?"You win!":"tie"===t?"It was a tie!":m?"Player ".concat(t," wins"):"You lose!"),r.a.createElement("div",null,r.a.createElement("button",{className:te.a.button,onClick:function(){m?b.emit("playAgain",u):(f(Array(9).fill(null)),d("X"===u)),n("")}},r.a.createElement("i",{className:"fa fa-undo","aria-hidden":"true"})," Play again"),r.a.createElement(l.b,{to:"/"},r.a.createElement("button",{className:te.a.button,onClick:function(){m?b.emit("exitGame",c):O(!0),n("")}},r.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"})," Exit"))))}var ae=n(89),re=n.n(ae);function oe(e){var t=e.player;return r.a.createElement("div",{className:re.a.container},r.a.createElement("h2",null,"Player ","X"===t?"O":"X"," left the game"),r.a.createElement(l.b,{to:"/"},r.a.createElement("button",{className:re.a.button},r.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"})," Exit")))}var ce=n(173),le=n.n(ce);function se(){var e=Object(a.useContext)(C),t=Object(i.a)(e,1)[0],n=Object(a.useContext)(u),o=n.squares,c=n.winner,l=n.isX,s=n.multiplayer,m=n.nextPlayer,d=Object(a.useContext)(f),p=d.user,b=d.room,_=d.player,g=o[1],v=c[1],E=l[1],O=s[1],h=m[1],y=p[1],j=b[1],x=_[1];return Object(a.useEffect)((function(){g(Array(9).fill(null)),v(""),E(!1),O(!1),h("X"),y(""),j(""),x("")}),[]),r.a.createElement("div",{className:le.a.container},r.a.createElement(K,null,"ChooseMode"===t?r.a.createElement(N,null):"ChooseOpponent"===t?r.a.createElement(q,null):"ChooseUsername"===t?r.a.createElement(T,null):r.a.createElement("p",null," An error occured! ")))}var ie=n(174),ue=n.n(ie),me=n(175),fe=n(26),de=n.n(fe);var pe=new me.Howl({src:["notify.mp3"]});function be(){var e=Object(a.useContext)(u),t=e.squares,n=e.winner,o=e.isX,c=e.multiplayer,l=e.nextPlayer,s=Object(a.useContext)(f),m=s.user,d=s.room,p=s.player,b=Object(i.a)(m,1)[0],g=Object(i.a)(d,1)[0],v=Object(i.a)(p,2),O=v[0],h=v[1],j=Object(i.a)(l,2),x=j[0],C=j[1],w=Object(a.useContext)(E),N=Object(i.a)(w,2),S=N[0],k=N[1],q=Object(i.a)(t,2),X=q[0],B=q[1],P=Object(i.a)(n,2),M=P[0],T=P[1],U=Object(i.a)(o,2),A=U[0],W=U[1],I=Object(i.a)(c,1)[0],G=Object(a.useContext)(H),R=Object(i.a)(G,2),Y=R[0],L=R[1],D=Object(a.useState)(!1),J=Object(i.a)(D,2),Q=J[0],Z=J[1],z=Object(a.useState)(""),V=Object(i.a)(z,2),$=V[0],ee=V[1],te=Object(a.useState)(!1),ae=Object(i.a)(te,2),re=ae[0],ce=ae[1];Object(a.useEffect)((function(){if(I){var e=ue.a.connect();return e.emit("joinRoom",{user:b,room:g}),k(e),e.on("userPlayed",(function(e){var t=e.squares,n=e.isX;B(t),W(n)})),e.on("typing",(function(){return ce(!0)})),e.on("notTyping",(function(){return ce(!1)})),e.on("playAgain",(function(e){C("X"===e?"O":"X"),B(Array(9).fill(null)),T("")})),e.on("newChallenger",(function(){console.log("new challenger"),pe.play(),B(Array(9).fill(null)),Z(!1)})),e.on("newMessage",(function(){console.log("new message"),pe.play()})),e.on("exitGame",(function(){Z(!0)})),"X"===O?L([{text:"Welcome to the game ".concat(b,"..."),sender:"#GameBot"},{text:"You are player X",sender:"#GameBot"},{text:"Challenger will join soon",sender:"#GameBot"}]):(L([{text:"Welcome to the game ".concat(b,"..."),sender:"#GameBot"},{text:"You are player O",sender:"#GameBot"},{text:"Start",sender:"#GameBot"}]),e.emit("newChallenger")),function(){I&&e.disconnect()}}h("X"),W(!0)}),[]),Object(a.useEffect)((function(){var e=function(e){for(var t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],n=0;n<t.length;n++){var a=Object(i.a)(t[n],3),r=a[0],o=a[1],c=a[2];if(e[r]&&e[r]===e[o]&&e[r]===e[c])return e[r]}return-1===e.indexOf(null)?"tie":null}(X);e?(T(e),!I&&C("X"===x?"O":"X")):I||A||"X"!==O||function(e){var t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],n=[];e.forEach((function(e,t){e||n.push(t)}));for(var a=n[Math.floor(Math.random()*n.length)],r=function(n){var a=Object(i.a)(t[n],3),r=a[0],o=a[1],c=a[2],l=e.filter((function(e,t){return"O"===e&&(t===r||t===o||t===c)})),s=e.filter((function(e,t){return"X"===e&&(t===r||t===o||t===c)}));return l.length>1&&!(e[r]&&e[o]&&e[c])?(e[r]?e[o]?setTimeout((function(){document.getElementById("square_".concat(c)).click()}),1e3):setTimeout((function(){document.getElementById("square_".concat(o)).click()}),1e3):setTimeout((function(){document.getElementById("square_".concat(r)).click()}),1e3),{v:void 0}):!(s.length>1)||e[r]&&e[o]&&e[c]?void 0:(e[r]?e[o]?setTimeout((function(){document.getElementById("square_".concat(c)).click()}),1e3):setTimeout((function(){document.getElementById("square_".concat(o)).click()}),1e3):setTimeout((function(){document.getElementById("square_".concat(r)).click()}),1e3),{v:void 0})},o=0;o<t.length;o++){var c=r(o);if("object"===typeof c)return c.v}setTimeout((function(){e[4]?document.getElementById("square_".concat(a)).click():document.getElementById("square_4").click()}),500)}(X)}),[X]);return r.a.createElement("div",{className:de.a.container},r.a.createElement(K,null,r.a.createElement("div",{className:de.a.play_container},r.a.createElement("div",{className:"".concat(de.a.playground," ").concat(de.a.playground_sm),style:{borderBottom:I?"inherit":"none"}},Q?r.a.createElement(oe,{player:O}):M?r.a.createElement(ne,{winner:M,setWinner:T,player:O,room:g,nextPlayer:x,multiplayer:I,setSquares:B,setIsX:W}):r.a.createElement(y,{squares:X})),I&&r.a.createElement("div",{className:de.a.messaging},r.a.createElement(F,{typing:re,player:O}),r.a.createElement("form",{className:de.a.form,onSubmit:function(e){e.preventDefault(),L([].concat(Object(_.a)(Y),[{text:$,sender:b,self:!0}])),ee(""),S.emit("newMessage",{text:$,sender:b}),S.emit("notTyping")}},r.a.createElement("input",{type:"text",placeholder:"Type message",value:$,onChange:function(e){ee(e.target.value),S.emit("typing")},onBlur:function(){return S.emit("notTyping")}}))))))}function _e(){return r.a.createElement(l.a,null,r.a.createElement(d,null,r.a.createElement(m,null,r.a.createElement(w,null,r.a.createElement(s.b,{component:se,exact:!0,path:"/"})),r.a.createElement(R,null,r.a.createElement(O,null,r.a.createElement(s.b,{component:be,exact:!0,path:"/play"}))))))}var ge=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ve(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_e,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ge?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ve(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ve(t,e)}))}}()},44:function(e,t,n){e.exports={message_container_sender:"Message_message_container_sender__-ai3E",message:"Message_message__3gOx4",message_container_receiver:"Message_message_container_receiver__2CHhc",time:"Message_time__wM_Ne"}},55:function(e,t,n){e.exports={square:"Square_square__2DYQy",svg:"Square_svg__1WQuS"}},56:function(e,t,n){e.exports={container:"ChooseMode_container__RZcup",button:"ChooseMode_button__17Vho"}},57:function(e,t,n){e.exports={container:"ChooseUsername_container__EEv5_",button:"ChooseUsername_button__5H6E3",form_group:"ChooseUsername_form_group__2zuNq"}},58:function(e,t,n){e.exports={container:"Feedback_container__3YNfg",button:"Feedback_button__1ye4_"}},88:function(e,t,n){e.exports={messages:"Messages_messages__2lUBQ",typing:"Messages_typing__2ofrZ"}},89:function(e,t,n){e.exports={container:"Exit_container__-vJcU",button:"Exit_button__2oCLv"}}},[[176,1,2]]]);
//# sourceMappingURL=main.d2b5f436.chunk.js.map